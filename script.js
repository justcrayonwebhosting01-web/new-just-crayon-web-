// 1. Translation Data for 50+ Languages
const translations = {
en: {
// Navigation
nav_home: "Home",
nav_books: "Books",
nav_about: "About Us",
nav_faq: "FAQ",
select_language: "Select Language:",
// Poster Section
poster_title: "Color, Smile & Dream ✨",
poster_subtitle: "Happy coloring books made with love for little hands and big imaginations",
// Hero Section
badge_text: "Designed with Love for Kids ❤️",
hero_title1: "Cute, Cozy",
hero_title2: "Coloring Books",
hero_title3: "Made with Love",
hero_subtitle: "for Happy Little Moments",
hero_desc: "Sweet animal friends, bold easy pages, and cozy scenes — made to help kids relax and smile.",
btn_explore: "Explore All Coloring Books",
btn_learn: "Learn More",
// Top Picks
top_picks1: "Our",
top_picks2: "Top Picks",
top_picks_subtitle: "Most loved coloring books by kids and parents",
btn_view_all: "View All Books",
// About
about_title1: "About",
about_intro: "We believe every child deserves moments of joy, creativity, and calm. That's why we create coloring books that spark imagination and bring smiles.",
about_p1: "At Just Crayon, we design each page with care—featuring adorable chibi-style animals, simple bold lines, and cozy scenes perfect for little hands. Our books are more than just coloring—they're tools for relaxation, creativity, and happy memories.",
about_p2: "Whether it's a rainy afternoon, a quiet moment before bed, or a fun family activity, our coloring books are here to make every moment special.",
value_love: "Made with Love",
value_friendly: "Kid-Friendly Designs",
value_joy: "Joy in Every Page",
// FAQ
faq_title1: "Frequently Asked",
faq_title2: "Questions",
faq_subtitle: "Everything you need to know about our coloring books",
faq_q1: "What age group are these coloring books suitable for?",
faq_a1: "Our coloring books are designed for children ages 3-10, but they're perfect for anyone who loves cute animals and relaxing coloring! The simple, bold lines make them ideal for beginners and young children.",
faq_q2: "What kind of paper is used in the books?",
faq_a2: "We use high-quality, thick paper that prevents bleed-through. Each page is single-sided, so your child can use markers, crayons, or colored pencils without worrying about ruining the next page.",
faq_q3: "How many pages are in each coloring book?",
faq_a3: "Each coloring book contains 50 unique designs, providing hours of creative fun and relaxation for your little ones.",
faq_q4: "Can I purchase these books as gifts?",
faq_a4: "Absolutely! Our coloring books make wonderful gifts for birthdays, holidays, or any special occasion. They're beautifully designed and packaged, ready to bring joy to any child.",
faq_q5: "Where can I buy your coloring books?",
faq_a5: "Our coloring books are available on Amazon. Simply click the 'Buy on Amazon' button on any book in our collection to purchase directly.",
faq_q6: "Do you offer digital versions of your coloring books?",
faq_a6: "Currently, we focus on physical coloring books to provide the best tactile and creative experience for children. However, we're exploring digital options for the future!",
// Features
features_title1: "Why You'll",
features_title2: "Love",
features_title3: "Our Books",
feature1_title: "Stress Relief",
feature1_desc: "Unwind and relax with our carefully designed coloring pages that melt away the stress of daily life.",
feature2_title: "Cute Animal Designs",
feature2_desc: "Adorable chibi-style animals that bring joy and warmth to every coloring session.",
feature3_title: "Beginner Friendly",
feature3_desc: "Perfect for all ages and skill levels. Start your creative journey with confidence!",
// Books Page
books_header: "Our Cozy",
books_header2: "Bookshelf",
books_subtitle: "Click any book to see details and purchase",
explore_collection: "Explore Our Collection",
cta_title: "Can't Find What You're",
cta_title2: "Looking For?",
cta_subtitle: "We're constantly adding new coloring books to our collection. Check back soon!",
btn_learn_about: "Learn More About Us",
btn_questions: "Have Questions?",
// Detail Page
back_to: "Back to Bookshelf",
bestseller: "Bestseller",
happy_customers: "Happy Customers",
about_book: "About This Book",
whats_inside: "What's Inside",
feature_50: "50 Unique Designs",
feature_50_desc: "Hours of creative fun",
feature_single: "Single-Sided Pages",
feature_single_desc: "No bleed-through",
feature_quality: "High-Quality Paper",
feature_quality_desc: "Works with all coloring tools",
feature_large: "Large 8.5\" x 11\"",
feature_large_desc: "Perfect for little hands",
feature_chibi: "Cute Chibi Style",
feature_chibi_desc: "Adorable animal designs",
feature_age: "Age 3-10",
feature_age_desc: "Beginner-friendly bold lines",
btn_buy_now: "Buy Now on Amazon",
secure_checkout: "Secure Checkout",
fast_shipping: "Fast Shipping",
easy_returns: "Easy Returns",
you_might_like: "You Might Also",
like: "Like",
btn_view_details: "View Details",
price: "Price",
interior_pages: "Interior Pages Preview"
},
es: {
nav_home: "Inicio",
nav_books: "Libros",
nav_about: "Sobre Nosotros",
nav_faq: "Preguntas Frecuentes",
select_language: "Seleccionar Idioma:",
poster_title: "Colorea, Sonríe y Sueña ✨",
poster_subtitle: "Libros para colorear felices hechos con amor para manitas y grandes imaginaciones",
badge_text: "Diseñado con Amor para Niños ❤️",
hero_title1: "Lindos y Acogedores",
hero_title2: "Libros para Colorear",
hero_title3: "Hechos con Amor",
hero_subtitle: "para Momentos Felices y Pequeños",
hero_desc: "Dulces amigos animales, páginas atrevidas y fáciles, y escenas acogedoras, hechas para ayudar a los niños a relajarse y sonreír.",
btn_explore: "Explorar Todos los Libros",
btn_learn: "Aprender Más",
top_picks1: "Nuestras",
top_picks2: "Mejores Selecciones",
top_picks_subtitle: "Los libros para colorear más amados por niños y padres",
btn_view_all: "Ver Todos los Libros"
},
zh: {
nav_home: "主页",
nav_books: "图书",
nav_about: "关于我们",
nav_faq: "常见问题",
select_language: "选择语言：",
poster_title: "涂色、微笑与梦想 ✨",
poster_subtitle: "用爱为小手和大想象力制作的快乐涂色书",
badge_text: "用爱为孩子设计 ❤️",
hero_title1: "可爱、温馨",
hero_title2: "涂色书",
hero_title3: "用爱制作",
hero_subtitle: "为快乐的小时光",
hero_desc: "可爱的动物朋友，大胆简单的页面，温馨的场景——帮助孩子放松和微笑。",
btn_explore: "探索所有涂色书",
btn_learn: "了解更多",
top_picks1: "我们的",
top_picks2: "精选推荐",
top_picks_subtitle: "孩子和家长最喜欢的涂色书",
btn_view_all: "查看所有图书"
},
hi: {
nav_home: "होम",
nav_books: "किताबें",
nav_about: "हमारे बारे में",
nav_faq: "सवाल-जवाब",
select_language: "भाषा चुनें:",
poster_title: "रंग भरो, मुस्कुराओ और सपने देखो ✨",
poster_subtitle: "छोटे हाथों और बड़ी कल्पनाओं के लिए प्यार से बनाई गई खुशी भरी रंग भरने की किताबें",
badge_text: "बच्चों के लिए प्यार से डिजाइन किया गया ❤️",
hero_title1: "प्यारी, आरामदायक",
hero_title2: "रंग भरने की किताबें",
hero_title3: "प्यार से बनाई गई",
hero_subtitle: "खुशी के छोटे पलों के लिए",
hero_desc: "प्यारे पशु मित्र, साहसिक आसान पेज, और आरामदायक दृश्य — बच्चों को आराम करने और मुस्कुराने में मदद करने के लिए बनाए गए।",
btn_explore: "सभी रंग भरने की किताबें देखें",
btn_learn: "और जानें",
top_picks1: "हमारी",
top_picks2: "शीर्ष पसंद",
top_picks_subtitle: "बच्चों और माता-पिता द्वारा सबसे पसंद की जाने वाली रंग भरने की किताबें",
btn_view_all: "सभी किताबें देखें"
},
bn: {
nav_home: "হোম",
nav_books: "বই",
nav_about: "আমাদের সম্পর্কে",
nav_faq: "প্রশ্নোত্তর",
select_language: "ভাষা নির্বাচন করুন:",
poster_title: "রঙ করুন, হাসুন এবং স্বপ্ন দেখুন ✨",
poster_subtitle: "ছোট হাত এবং বড় কল্পনার জন্য ভালোবাসা দিয়ে তৈরি সুখী রঙিন বই",
badge_text: "শিশুদের জন্য ভালোবাসা দিয়ে ডিজাইন করা ❤️",
hero_title1: "সুন্দর, আরামদায়ক",
hero_title2: "রঙিন বই",
hero_title3: "ভালোবাসা দিয়ে তৈরি",
hero_subtitle: "সুখী ছোট মুহূর্তের জন্য",
hero_desc: "মিষ্টি পশু বন্ধুরা, সাহসী সহজ পৃষ্ঠা, এবং আরামদায়ক দৃশ্য — শিশুদের শিথিল এবং হাসতে সাহায্য করার জন্য তৈরি।",
btn_explore: "সমস্ত রঙিন বই অন্বেষণ করুন",
btn_learn: "আরও জানুন",
top_picks1: "আমাদের",
top_picks2: "শীর্ষ পছন্দ",
top_picks_subtitle: "শিশু এবং পিতামাতার দ্বারা সবচেয়ে প্রিয় রঙিন বই",
btn_view_all: "সমস্ত বই দেখুন"
},
ja: {
nav_home: "ホーム",
nav_books: "本",
nav_about: "私たちについて",
nav_faq: "よくある質問",
select_language: "言語を選択：",
poster_title: "色を塗り、笑顔で夢を見よう ✨",
poster_subtitle: "小さな手と大きな想像力のために愛を込めて作られた幸せな塗り絵",
badge_text: "子供たちのために愛を込めてデザイン ❤️",
hero_title1: "かわいい、居心地の良い",
hero_title2: "塗り絵",
hero_title3: "愛を込めて作られた",
hero_subtitle: "幸せな小さな瞬間のために",
hero_desc: "かわいい動物の友達、大胆で簡単なページ、居心地の良いシーン — 子供たちがリラックスして笑顔になるように作られています。",
btn_explore: "すべての塗り絵を探索",
btn_learn: "もっと詳しく",
top_picks1: "私たちの",
top_picks2: "トップピック",
top_picks_subtitle: "子供と親に最も愛されている塗り絵",
btn_view_all: "すべての本を見る"
},
de: {
nav_home: "Startseite",
nav_books: "Bücher",
nav_about: "Über uns",
nav_faq: "FAQ",
select_language: "Sprache auswählen:",
poster_title: "Farben, Lächeln & Träumen ✨",
poster_subtitle: "Glückliche Malbücher mit Liebe für kleine Hände und große Vorstellungen gemacht",
badge_text: "Mit Liebe für Kinder entworfen ❤️",
hero_title1: "Niedliche, gemütliche",
hero_title2: "Malbücher",
hero_title3: "Mit Liebe gemacht",
hero_subtitle: "für glückliche kleine Momente",
hero_desc: "Süße Tierfreunde, mutige einfache Seiten und gemütliche Szenen — gemacht, um Kindern zu helfen, sich zu entspannen und zu lächeln.",
btn_explore: "Alle Malbücher erkunden",
btn_learn: "Mehr erfahren",
top_picks1: "Unsere",
top_picks2: "Top-Auswahl",
top_picks_subtitle: "Die beliebtesten Malbücher bei Kindern und Eltern",
btn_view_all: "Alle Bücher ansehen"
},
pt: {
nav_home: "Início",
nav_books: "Livros",
nav_about: "Sobre Nós",
nav_faq: "Perguntas Frequentes",
select_language: "Selecionar Idioma:",
poster_title: "Colorir, Sorrir e Sonhar ✨",
poster_subtitle: "Livros de colorir felizes feitos com amor para mãozinhas e grandes imaginações",
badge_text: "Projetado com Amor para Crianças ❤️",
hero_title1: "Fofos e Aconchegantes",
hero_title2: "Livros de Colorir",
hero_title3: "Feitos com Amor",
hero_subtitle: "para Momentos Felizes",
hero_desc: "Doces amigos animais, páginas ousadas e fáceis, e cenas aconchegantes — feitos para ajudar as crianças a relaxar e sorrir.",
btn_explore: "Explorar Todos os Livros",
btn_learn: "Saiba Mais",
top_picks1: "Nossas",
top_picks2: "Principais Escolhas",
top_picks_subtitle: "Livros de colorir mais amados por crianças e pais",
btn_view_all: "Ver Todos os Livros"
},
it: {
nav_home: "Home",
nav_books: "Libri",
nav_about: "Chi Siamo",
nav_faq: "Domande Frequenti",
select_language: "Seleziona Lingua:",
poster_title: "Colora, Sorridi e Sogna ✨",
poster_subtitle: "Libri da colorare felici fatti con amore per manine e grandi immaginazioni",
badge_text: "Progettato con Amore per i Bambini ❤️",
hero_title1: "Carini e Accoglienti",
hero_title2: "Libri da Colorare",
hero_title3: "Fatti con Amore",
hero_subtitle: "per Momenti Felici",
hero_desc: "Dolci amici animali, pagine audaci e facili, e scene accoglienti — fatti per aiutare i bambini a rilassarsi e sorridere.",
btn_explore: "Esplora Tutti i Libri",
btn_learn: "Scopri di Più",
top_picks1: "Le Nostre",
top_picks2: "Migliori Scelte",
top_picks_subtitle: "I libri da colorare più amati da bambini e genitori",
btn_view_all: "Vedi Tutti i Libri"
}
};

// 2. Features Data
const features = [
{
icon: "heart",
titleKey: "feature1_title",
descKey: "feature1_desc"
},
{
icon: "sparkles",
titleKey: "feature2_title",
descKey: "feature2_desc"
},
{
icon: "smile",
titleKey: "feature3_title",
descKey: "feature3_desc"
}
];

// 3. All products data with image gallery
const allProducts = [
{
id: 1,
image: "assets/cozy-cat-moments.png",
backCover: "assets/cozy-cat-back.jpg",
interiorPages: [
"assets/interior/cozy-cat-page1.jpg",
"assets/interior/cozy-cat-page2.jpg",
"assets/interior/cozy-cat-page3.jpg",
"assets/interior/cozy-cat-page4.jpg",
"assets/interior/cozy-cat-page5.jpg",
"assets/interior/cozy-cat-page6.jpg",
"assets/interior/cozy-cat-page7.jpg",
"assets/interior/cozy-cat-page8.jpg",
"assets/interior/cozy-cat-page9.jpg",
"assets/interior/cozy-cat-page10.jpg"
],
title: "Cozy Cat Moments",
price: "$9.79",
buyLink: "https://www.amazon.com/dp/B0FYMV8YKX",
featured: true,
description: "Dive into a world of adorable feline friends with our Cozy Cat Moments coloring book! Featuring 50 charming chibi-style cats in heartwarming scenes, this book is perfect for cat lovers of all ages. Each page showcases cute kitties in cozy settings—from napping in sunny windows to playing with yarn balls. The simple, bold outlines make it ideal for beginners while still being enjoyable for experienced colorists."
},
{
id: 2,
image: "assets/spooky-cuddles.png",
backCover: "assets/spooky-cuddles-back.jpg",
interiorPages: [
"assets/interior/spooky-page1.jpg",
"assets/interior/spooky-page2.jpg",
"assets/interior/spooky-page3.jpg",
"assets/interior/spooky-page4.jpg",
"assets/interior/spooky-page5.jpg",
"assets/interior/spooky-page6.jpg",
"assets/interior/spooky-page7.jpg",
"assets/interior/spooky-page8.jpg",
"assets/interior/spooky-page9.jpg",
"assets/interior/spooky-page10.jpg"
],
title: "Chibi Cats – Spooky Cuddles",
price: "$9.89",
buyLink: "#",
featured: true,
description: "Get ready for some spooky-cute fun with Chibi Cats – Spooky Cuddles! This Halloween-themed coloring book features 50 adorable cats dressed in costumes, surrounded by pumpkins, bats, and other not-so-scary decorations. Perfect for the Halloween season or year-round spooky fun! Each design combines the cuteness of chibi art with festive Halloween elements, creating the perfect balance of sweet and spooky."
},
{
id: 3,
image: "assets/christmas-cat-poster.png",
backCover: "assets/christmas-cat-back.jpg",
interiorPages: [
"assets/interior/christmas-page1.jpg",
"assets/interior/christmas-page2.jpg",
"assets/interior/christmas-page3.jpg",
"assets/interior/christmas-page4.jpg",
"assets/interior/christmas-page5.jpg",
"assets/interior/christmas-page6.jpg",
"assets/interior/christmas-page7.jpg",
"assets/interior/christmas-page8.jpg",
"assets/interior/christmas-page9.jpg",
"assets/interior/christmas-page10.jpg"
],
title: "Christmas Cat Coloring Book",
price: "$9.99",
buyLink: "#",
featured: false,
description: "Celebrate the holiday season with our Christmas Cat Coloring Book! This festive collection features 50 adorable cats in Christmas-themed scenes—decorating trees, opening presents, wearing Santa hats, and spreading holiday cheer. Perfect for getting into the Christmas spirit while enjoying a relaxing coloring session. Each page captures the magic of the holidays with cute chibi-style cats that will warm your heart."
},
{
id: 4,
image: "assets/cozy-cat-poster.png",
backCover: "assets/cozy-cat-poster-back.jpg",
interiorPages: [
"assets/interior/adventures-page1.jpg",
"assets/interior/adventures-page2.jpg",
"assets/interior/adventures-page3.jpg",
"assets/interior/adventures-page4.jpg",
"assets/interior/adventures-page5.jpg",
"assets/interior/adventures-page6.jpg",
"assets/interior/adventures-page7.jpg",
"assets/interior/adventures-page8.jpg",
"assets/interior/adventures-page9.jpg",
"assets/interior/adventures-page10.jpg"
],
title: "Cozy Cat Adventures",
price: "$9.79",
buyLink: "#",
featured: false,
description: "Join our adorable chibi cats on exciting adventures! This coloring book features 50 unique designs showing cats exploring gardens, playing with butterflies, lounging in cozy blankets, and enjoying peaceful moments. Each page is designed to provide hours of relaxation and creative enjoyment. The charming illustrations combine cuteness with peaceful scenes, making it perfect for stress relief and mindfulness."
},
{
id: 5,
image: "assets/cozy-cat-moments.png",
backCover: "assets/happy-cat-back.jpg",
interiorPages: [
"assets/interior/happy-page1.jpg",
"assets/interior/happy-page2.jpg",
"assets/interior/happy-page3.jpg",
"assets/interior/happy-page4.jpg",
"assets/interior/happy-page5.jpg",
"assets/interior/happy-page6.jpg",
"assets/interior/happy-page7.jpg",
"assets/interior/happy-page8.jpg",
"assets/interior/happy-page9.jpg",
"assets/interior/happy-page10.jpg"
],
title: "Happy Cat Collection",
price: "$9.89",
buyLink: "#",
featured: false,
description: "Bring joy to your coloring time with our Happy Cat Collection! Featuring 50 cheerful feline friends in delightful scenarios, this book celebrates the playful and loving nature of cats. From birthday parties to tea time, from playing in flowers to stargazing, each page brings a smile. The expressive chibi-style cats are designed with bold, easy-to-color lines perfect for all skill levels."
},
{
id: 6,
image: "assets/christmas-cat-poster.png",
backCover: "assets/holiday-cats-back.jpg",
interiorPages: [
"assets/interior/holiday-page1.jpg",
"assets/interior/holiday-page2.jpg",
"assets/interior/holiday-page3.jpg",
"assets/interior/holiday-page4.jpg",
"assets/interior/holiday-page5.jpg",
"assets/interior/holiday-page6.jpg",
"assets/interior/holiday-page7.jpg",
"assets/interior/holiday-page8.jpg",
"assets/interior/holiday-page9.jpg",
"assets/interior/holiday-page10.jpg"
],
title: "Holiday Cats Coloring",
price: "$9.99",
buyLink: "#",
featured: false,
description: "Celebrate every season with Holiday Cats Coloring! This versatile book includes 50 designs featuring cats celebrating various holidays throughout the year—Valentine's Day, Easter, Halloween, Thanksgiving, Christmas, and more. Each design captures the spirit of the holiday while maintaining the adorable chibi cat charm. Perfect for year-round coloring fun and celebrating special occasions!"
}
];

const topProducts = allProducts.filter(p => p.featured);

// 4. Current Language State
let currentLanguage = 'en';

// 5. Image Gallery State
let currentBookData = null;
let currentImageIndex = 0;
let allImages = [];

// 6. Translation Function
function translatePage(lang) {
currentLanguage = lang;
const trans = translations[lang] || translations.en;

// Translate all elements with data-translate attribute
document.querySelectorAll('[data-translate]').forEach(element => {
const key = element.getAttribute('data-translate');
if (trans[key]) {
element.textContent = trans[key];
}
});

// Re-render dynamic content with new language
renderFeatures();

// Save language preference
localStorage.setItem('preferredLanguage', lang);
}

// 7. Initialize Page Content
document.addEventListener("DOMContentLoaded", () => {
// Setup language selector
setupLanguageSelector();

// Load saved language or default to English
const savedLang = localStorage.getItem('preferredLanguage') || 'en';
const selector = document.getElementById('languageSelector');
if (selector) {
selector.value = savedLang;
translatePage(savedLang);
}

// Check which page we're on
const isHomePage = document.querySelector('.top-products-grid');
const isBookshelfPage = document.querySelector('.bookshelf-grid');
const isDetailPage = document.querySelector('.book-detail-section');

// Render appropriate content
if (isHomePage) {
renderTopProducts();
}

if (isBookshelfPage) {
renderBookshelf();
}

if (isDetailPage) {
renderBookDetail();
}

// Always render features if the grid exists
renderFeatures();

// Setup FAQ if exists
setupFAQ();

// Setup smooth scroll
setupSmoothScroll();

// Initialize Lucide Icons
lucide.createIcons();

// Setup Scroll Animations
setupScrollReveal();
});

// 8. Language Selector Setup
function setupLanguageSelector() {
const selector = document.getElementById('languageSelector');
if (!selector) return;

selector.addEventListener('change', (e) => {
translatePage(e.target.value);
lucide.createIcons(); // Refresh icons after translation
});
}

// 9. Helper Functions
function renderFeatures() {
const grid = document.querySelector(".features-grid");
if (!grid) return;

const trans = translations[currentLanguage] || translations.en;

grid.innerHTML = features.map(f => `
<div class="feature-card reveal">
<i data-lucide="${f.icon}" class="feature-icon"></i>
<h3>${trans[f.titleKey]}</h3>
<p>${trans[f.descKey]}</p>
</div>
`).join("");
}

function renderTopProducts() {
const grid = document.querySelector(".top-products-grid");
if (!grid) return;

const trans = translations[currentLanguage] || translations.en;

grid.innerHTML = topProducts.map(p => `
<div class="product-card reveal">
<div class="product-image-container">
<img src="${p.image}" alt="${p.title}">
</div>
<div class="product-info">
<h4>${p.title}</h4>
<p class="price">${p.price}</p>
<a href="${p.buyLink}" class="btn-buy">${trans.btn_buy_now || 'Buy on Amazon'}</a>
</div>
</div>
`).join("");
}

function renderBookshelf() {
const grid = document.querySelector(".bookshelf-grid");
if (!grid) return;

const trans = translations[currentLanguage] || translations.en;

grid.innerHTML = allProducts.map(book => `
<div class="book-item reveal" onclick="goToBookDetail(${book.id})">
<div class="book-cover">
<div class="book-spine"></div>
<img src="${book.image}" alt="${book.title}" class="book-cover-image">
<div class="book-info-hover">
<h4>${book.title}</h4>
<p class="price">${book.price}</p>
<div class="quick-view">
<i data-lucide="eye"></i>
<span>${trans.btn_view_details || 'View Details'}</span>
</div>
</div>
</div>
</div>
`).join("");
}

function goToBookDetail(bookId) {
window.location.href = `bookdetail.html?id=${bookId}`;
}

// 10. Book Detail Page with Image Gallery
function renderBookDetail() {
const urlParams = new URLSearchParams(window.location.search);
const bookId = parseInt(urlParams.get('id'));
const book = allProducts.find(p => p.id === bookId);

if (!book) {
window.location.href = 'books.html';
return;
}

// Store current book data globally
currentBookData = book;

// Build complete image array: [front, back, ...interior pages]
allImages = [
{ src: book.image, label: 'Front Cover', type: 'front' },
{ src: book.backCover, label: 'Back Cover', type: 'back' },
...book.interiorPages.map((page, idx) => ({
src: page,
label: `Page ${idx + 1}`,
type: 'interior'
}))
];

// Set initial image
currentImageIndex = 0;

// Update book info
document.getElementById('book-title').textContent = book.title;
document.getElementById('book-price').textContent = book.price;
document.getElementById('book-description').textContent = book.description;
document.getElementById('buy-button').href = book.buyLink;

// Initialize image gallery
initializeImageGallery();

// Render related books
const relatedBooks = allProducts.filter(p => p.id !== bookId).slice(0, 3);
const relatedGrid = document.querySelector('.related-books-grid');
const trans = translations[currentLanguage] || translations.en;

if (relatedGrid) {
relatedGrid.innerHTML = relatedBooks.map(p => `
<div class="product-card reveal" onclick="goToBookDetail(${p.id})">
<div class="product-image-container">
<img src="${p.image}" alt="${p.title}">
</div>
<div class="product-info">
<h4>${p.title}</h4>
<p class="price">${p.price}</p>
<a href="bookdetail.html?id=${p.id}" class="btn-buy" onclick="event.stopPropagation()">${trans.btn_view_details || 'View Details'}</a>
</div>
</div>
`).join("");
}

// Reinitialize icons after rendering
lucide.createIcons();
}

// 11. Image Gallery Functions
function initializeImageGallery() {
// Display initial image (front cover)
updateMainImage();

// Generate thumbnails
generateThumbnails();

// Add click event to main image for navigation
const mainImage = document.getElementById('main-book-image');
if (mainImage) {
mainImage.style.cursor = 'pointer';
mainImage.addEventListener('click', nextImage);
}
}

function updateMainImage() {
const mainImage = document.getElementById('main-book-image');
const imageLabel = document.getElementById('current-image-label');

if (!mainImage || !allImages[currentImageIndex]) return;

mainImage.src = allImages[currentImageIndex].src;
mainImage.alt = allImages[currentImageIndex].label;
imageLabel.textContent = allImages[currentImageIndex].label;

// Update active thumbnail
updateActiveThumbnail();
}

function generateThumbnails() {
const thumbnailGrid = document.getElementById('thumbnail-grid');
if (!thumbnailGrid) return;

thumbnailGrid.innerHTML = allImages.map((img, index) => {
let badgeHTML = '';
if (img.type === 'front') {
badgeHTML = '<span class="thumbnail-badge">Front</span>';
} else if (img.type === 'back') {
badgeHTML = '<span class="thumbnail-badge thumbnail-back">Back</span>';
}

return `
<div class="thumbnail-item ${index === 0 ? 'active' : ''}" onclick="jumpToImage(${index})">
<img src="${img.src}" alt="${img.label}">
${badgeHTML}
</div>
`;
}).join('');

lucide.createIcons();
}

function updateActiveThumbnail() {
const thumbnails = document.querySelectorAll('.thumbnail-item');
thumbnails.forEach((thumb, idx) => {
if (idx === currentImageIndex) {
thumb.classList.add('active');
} else {
thumb.classList.remove('active');
}
});
}

// Navigation functions
function previousImage() {
if (currentImageIndex > 0) {
currentImageIndex--;
updateMainImage();
}
}

function nextImage() {
if (currentImageIndex < allImages.length - 1) {
currentImageIndex++;
updateMainImage();
}
}

function jumpToImage(index) {
if (index >= 0 && index < allImages.length) {
currentImageIndex = index;
updateMainImage();
}
}

// 12. FAQ Accordion Functionality
function setupFAQ() {
const faqItems = document.querySelectorAll('.faq-item');
if (faqItems.length === 0) return;

faqItems.forEach(item => {
const question = item.querySelector('.faq-question');
question.addEventListener('click', () => {
faqItems.forEach(otherItem => {
if (otherItem !== item && otherItem.classList.contains('active')) {
otherItem.classList.remove('active');
}
});

item.classList.toggle('active');
lucide.createIcons();
});
});
}

// 13. Smooth Scroll for Navigation Links
function setupSmoothScroll() {
const navLinks = document.querySelectorAll('.nav-link');
navLinks.forEach(link => {
link.addEventListener('click', (e) => {
const href = link.getAttribute('href');
if (href.startsWith('#')) {
e.preventDefault();
const targetId = href;
const targetSection = document.querySelector(targetId);

if (targetSection) {
const offsetTop = targetSection.offsetTop - 80;
window.scrollTo({
top: offsetTop,
behavior: 'smooth'
});
}
}
});
});
}

// 14. Scroll Reveal Animation Logic
function setupScrollReveal() {
const observerOptions = {
threshold: 0.1,
rootMargin: '0px 0px -100px 0px'
};

const observer = new IntersectionObserver((entries) => {
entries.forEach(entry => {
if (entry.isIntersecting) {
entry.target.classList.add("active");
}
});
}, observerOptions);

document.querySelectorAll(".reveal").forEach(el => observer.observe(el));
}
